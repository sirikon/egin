{
    "type": "module",
    "scripts": {
        "start": "stmux -M -- [ -t 'tsc type check' -s 4/5 'npm run -s type-check-app' : [ -t 'style builder' 'npm run -s build-style-watch' .. -t 'app builder' 'npm run -s build-app-watch' .. -t 'static serve' 'npm run -s serve-static' ] ]",
        "build": "npm run build-style && npm run copy-static && npm run build-app",

        "type-check-app": "tsc src/main.ts --watch --noEmit",

        "build-app":       "esbuild src/main.ts --bundle --external:crypto --minify --outfile=dist/main.js",
        "build-app-watch": "esbuild src/main.ts --bundle --external:crypto --serve=127.0.0.1:8001",

        "build-style":       "sass src/style.scss:dist/style.css --no-source-map --style=compressed",
        "build-style-watch": "sass src/style.scss:static/style.css --no-source-map --watch",

        "copy-static": "mkdir -p ./dist && cp -r ./static/* ./dist",
        "serve-static": "echo 'http://127.0.0.1:8000' && http-server ./static -s -a 127.0.0.1 -p 8000 -P http://127.0.0.1:8001",
        "test": "mocha"
    },
    "dependencies": {
        "dropbox": "^8.2.0",
        "fast-json-patch": "^3.0.0-1",
        "hyperactiv": "^0.8.4",
        "mithril": "^2.0.4"
    },
    "devDependencies": {
        "chai": "^4.2.0",
        "concurrently": "^5.3.0",
        "esbuild": "^0.8.32",
        "http-server": "^0.12.3",
        "mocha": "^8.2.1",
        "sass": "^1.30.0",
        "stmux": "^1.8.1",
        "typescript": "^4.1.3"
    }
}
